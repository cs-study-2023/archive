# NoSQL

## 개념정리

### 관계형 데이터베이스 정의

- 특징1.스키마: 관계형 데이터베이스에서 데이터는 정해진 엄격한 데이터 **스키마**에 따라 데이터베이스 테이블에 저장된다.
  - 데이터는 테이블에 레코드로 저장되고 각 테이블에는 명확하게 정의된 구조가 있다.
  - ![SQL_구조](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F99BF063C5C937DF324)
- 특징2. 관계: 관계형 데이터베이스에서 데이터는 **관계**를 통해서 연결된 여러개의 테이블에 분산된다.
  - 데이터들을 여러개의 테이블에 나눠서 데이터 중복을 피한다.
  - 만약, 사용자가 구입한 상품들을 나타내기 위해서는 Users, Products, Orders 3개의 테이블을 만들어야되지만, 각각의 테이블은 다른 테이블에 저장되지않은 데이터만을 가지고있어 중복이 없다.
  - ![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F994D09355C937ECD2D)

### NoSQL정의

- NoSQL은 기본적으로 SQL(관계형 데이터베이스)와 반대되는 접근방식을 따르기 때문에 지어진 이름이다.
  - 스키마 없음
  - 관계 없음
- 특징1. 자유로운 데이터 관리: SQL 세상에서는 정해진 스키마를 따르지 않는다면 데이터를 추가할 수 없지만, NoSQL에서는 다른 구조의 데이터를 같은 컬렉션(SQL 세상에서의 테이블같은 것)에 추가할 수 있다.
  - ![NoSQL_구조](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F99FBC9415C937F2A20)
    - NoSQL 세상에서는 레코드를 문서(documents)라고 부른다.
    - 문서는 JSON 데이터와 비슷한 형태를 가지고 있다.
- 특징2. 데이터 중복 저장
  - 관계형 데이터베이스처럼 데이터를 나누어 담지 않고, 관련 데이터를 동일한 컬렉션에 넣는다.
  - 주문 정보를 그냥 Orders 콜렉션에 저장해버린다. 즉, 관계형 데이터베이스에서 사용했던 Users나 Products 정보 또한 Orders에 포함해서 한꺼번에 저장<br>
    => join 필요 없어짐(원하면 할 수 있지만 일반적이지 못함)
  - 대신 컬렉션을 통해 데이터를 복제해 각 컬렉션 일부분에 속하는 데이터를 정확하게 산출한다.
  - ![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F99C57D3B5C937F5E17)
  - 이렇게 데이터를 복제해서 컬렉션에 중복되게 저장한다면, 실수로 컬렉션A에서만 데이터를 업데이트하고 컬렉션B에서는 하지않아 모순이 발생할 수 있다.
  - 특정 데이터를 같이 사용다면, 모든 컬렉션에서 똑같은 데이터 업데이트를 수행하도록 주의해야한다.

### 수직적 & 수평적 확장

- 수직적 확장:데이터베이스 서버의 성능을 향상
  - ex CPU 업그레이드
- 수평적 확장: 많은 서버가 추가되고 데이터베이스가 전체적으로 분산
  ![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F990D6E385C937F8530)
- 관계형 데이터베이스는 분산 저장이 어렵기때문에 일반적으로 수직적 확장만을 지원하여 수평적 확장은 NoSQL에서만 가능하다.

### RDBMS VS NoSQL

#### RDBMS

장점

- 각 데이터는 중복없이 한 번만 저장된다.
- 명확하게 정의된 스키마 덕분에 데이터 무결성이 보장된다.

단점

- 데이터 스키마가 사전에 계획되기때문에 이후 수정이 어렵다.
- 관계를 맺고 있어, join문이 많은 복잡한 쿼리로 데이터를 읽어오는 상황이 있다.

사용하면 좋은 경우

- 관계를 맺고 있는 데이터가 자주 변경되는 어플리케이션
- 변경될 여지 없고, 명확한 스키마가 사용자와 데이터에게 중요한 경우
- 수평적 확장이 어렵다.

#### NoSQL

장점

- 유연한 데이터 관리 가능하다.
- 데이터 읽는 속도가 빠르다.
- 수직 및 수평 확장이 가능하다.

단점

- 데이터가 여러 컬렉션에 중복되어 있어, 하나의 내용이 변경되었을때 여러 레코드를 수정해야한다.

사용하면 좋은 경우

- 정확한 데이터 구조가 없거나 변경/확장될 수 있는 경우
- 읽기처리는 자주하지만, 데이터 수정은 자주하지 않는 경우
- 막재한 양의 데이터를 다루어서 데이터베이스를 수평으로 확장해야하는 경우

## 예상질문

- RDBMS와 NoSQL의 차이에 대해 설명해주시고 각각 어떤 경우에 적합한지 설명해주세요.

---

### 참고자료

[SQL vs NoSQL (MySQL vs. MongoDB)](https://siyoon210.tistory.com/130)<br>
