# Call By Value vs Call By Reference

## Call By Value

- μΈμλ΅ λ°›μ€ κ°’μ„ λ³µμ‚¬ν•μ—¬ μ²λ¦¬ν•λ‹¤.
- μ›λ κ°’μ΄ μμ •λμ§€ μ•λ”λ‹¤.
- λ³€μμ λ³µμ‚¬λ³Έμ΄ μ „λ‹¬λλ‹¤.
- μ‹¤μ  μΈμκ°€ λ‹¤λ¥Έ λ©”λ¨λ¦¬ μ„μΉμ— μƒμ„±λλ‹¤.

## Call By Reference

- μΈμλ΅ λ°›μ€ κ°’μ μ£Όμ†λ¥Ό μ°Έμ΅°ν•μ—¬ μ§μ ‘ κ°’μ— μν–¥μ„ μ¤€λ‹¤.
- μ›λμ κ°’μ΄ μμ •λλ‹¤.
- λ³€μ μμ²΄κ°€ μ „λ‹¬λλ‹¤.
- μ‹¤μ  μΈμκ°€ κ°™μ€ λ©”λ¨λ¦¬ μ„μΉμ— μƒμ„±λλ‹¤.

## μλ°”μ λ°μ΄ν„° ν•

- κΈ°λ³Έν•(Primitive type) - BooleanType(boolean), Numeric Type(short, int long, float, double, char)
- μ°Έμ΅°ν•(reference type) - Class Type, Interface Type, Array Type, Enum Type

## JVM λ©”λ¨λ¦¬μ— λ³€μκ°€ μ €μ¥λλ” μ„μΉ

- Javaμ—μ„ λ³€μκ°€ μ„ μ–Έλλ©΄ Stack μμ—­μ— ν• λ‹Ήλλ‹¤.
- κΈ°λ³Έν•(primitive)μ€ Stack μμ—­μ— λ³€μμ™€ ν•¨κ» μ €μ¥λλ©° μ°Έμ΅°ν•(Reference)μ€ Heap μμ—­μ— μ €μ¥λκ³  Stack μμ—­μ— μλ” λ³€μκ°€ κ°μ²΄μ μ£Όμ†κ°’μ„ κ°€μ§€κ³  μλ‹¤.

![Untitled](img/jvm_positition.png)

### μ›μ‹νƒ€μ…(Primitive)μ μ „λ‹¬

```jsx
public class PrimitiveTypeTest {

    @Test
    @DisplayName("Primitive Type μ€ Stack λ©”λ¨λ¦¬μ— μ €μ¥λμ–΄μ„ λ³€κ²½ν•΄λ„ μ›λ³Έ λ³€μμ— μν–¥μ΄ μ—†λ‹¤")
    void test() {
        int a = 1;
        int b = 2;

        // Before
        assertEquals(a, 1);
        assertEquals(b, 2);

        modify(a, b);

        // After: modify(a, b) νΈμ¶ ν›„μ—λ„ κ°’μ΄ λ³€ν•μ§€ μ•μ
        assertEquals(a, 1);
        assertEquals(b, 2);
    }

    private void modify(int a, int b) {
        // μ—¬κΈ° μλ” νλΌλ―Έν„° a, b λ” μ΄λ¦„λ§ κ°™μ„ λΏ test() μ— μλ” a, b μ™€ λ‹¤λ¥Έ λ³€μ
        a = 5;
        b = 10;
    }
}
```

![Untitled](img/primitive.png)

- test()μ λ³€μ a,bμ™€ modify9(a,b)λ΅ μ „λ‹¬λ°›μ€ νλΌλ―Έν„° a,bμ μ΄λ¦„μ€ κ°™μ§€λ§ λ‹¤λ¥Έ λ³€μμ΄λ‹¤.
    - μ¦‰, modify(a,b)λ¥Ό νΈμ¶ν•λ” μκ°„ stack μμ—­μ— μƒλ΅μ΄ λ³€μ a,bκ°€ μƒλ΅ μƒμ„±λμ–΄ μ΄ 4κ°μ λ³€μκ°€ μ΅΄μ¬ν•λ‹¤.

### μ°Έμ΅°νƒ€μ…(Reference Type)μ μ „λ‹¬

- λ³€μ μμ²΄λ” Stack μμ—­μ— μƒμ„±λμ§€λ§ μ‹¤μ  κ°μ²΄λ” heapμμ—­μ— μ„μΉ

```jsx
class User {
    public int age;

    public User(int age) {
        this.age = age;
    }
}

public class ReferenceTypeTest {

    @Test
    void test() {
        User a = new User(10);
        User b = new User(20);

        // Before
        assertEquals(a.age, 10);
        assertEquals(b.age, 20);

        modify(a, b);

        // After
        assertEquals(a.age, 11);
        assertEquals(b.age, 20);
    }

    private void modify(User a, User b) {
        // a, b μ™€ μ΄λ¦„μ΄ κ°™κ³  κ°™μ€ κ°μ²΄λ¥Ό λ°”λΌλ³Έλ‹¤.
        // ν•μ§€λ§ test μ— μλ” λ³€μμ™€ ν™•μ‹¤ν λ‹¤λ¥Έ λ³€μλ‹¤.

        // modify μ a μ™€ test μ a λ” κ°™μ€ κ°μ²΄λ¥Ό λ°”λΌλ³Έλ‹¤ = μ£Όμ†κ°’μ΄ κ°™λ‹¤.
        a.age++;

        // b μ— μƒλ΅μ΄ κ°μ²΄λ¥Ό ν• λ‹Ήν•λ©΄ κ°€λ¦¬ν‚¤λ” κ°μ²΄κ°€ λ‹¬λΌμ§„λ‹¤. = μ£Όμ†κ°’λ„ λ‹¬λΌμ§„λ‹¤.
        b = new User(30);
        b.age++;
    }
}
```
![Untitled](img/reference1.png)
μ²μ λ³€μ μ„ μ–Έ μ‹ λ©”λ¨λ¦¬ μƒνƒ
- λ³€μλ§ Stackμμ—­μ— μƒμ„±λκ³  μ‹¤μ  κ°μ²΄λ” Heap μμ—­μ— μƒμ„±λλ‹¤.
---

![Untitled](img/reference2.png)
modify(a,b)μ νΈμ¶ μ‹μ μ λ©”λ¨λ¦¬ μƒνƒ 
- λ„κ²¨λ°›μ€ νλΌλ―Έν„°λ” Stackμ— μƒμ„±λκ³  λ„κ²¨λ°›μ€ μ£Όμ†κ°’μ„ λ‘κ°™μ΄ λ°”λΌλ³Έλ‹¤. 

---
![Untitled](img/reference3.png)
modify(a,b) μν–‰ μ§ν›„ λ©”λ¨λ¦¬ μƒνƒ
- test()μ™€ modify()μ aλ³€μλ” κ°™μ€ κ°μ²΄λ¥Ό λ°”λΌλ³΄κ³  μκΈ°λ•λ¬Έμ— κ°μ²΄λ¥Ό κ³µμ ν•λ‹¤.
- bλΌλ” λ³€μλ” κ°™μ€ κ°μ²΄λ¥Ό λ°”λΌλ³΄κ³  μμ—μ§€λ§, μƒλ΅μ΄ κ°μ²΄λ¥Ό μƒμ„±ν•΄μ„ ν• λ‹Ήν–κΈ° λ•λ¬Έμ— User03μ΄λΌλ” μƒλ΅μ΄ κ°μ²΄λ¥Ό λ°”λΌλ³΄κ² λλ‹¤. 

---
![Untitled](img/reference4.png)
test()λλ‚ ν›„ μµμΆ… λ©”λ¨λ¦¬ μƒνƒ
- modify(a,b) λ©”μ†λ“λ¥Ό λΉ μ Έλ‚μ¤λ©΄ Stack μμ—­μ— ν• λ‹Ήλ λ³€μλ“¤μ€ μ‚¬λΌμ§„λ‹¤.
- μµμΆ…μ μΌλ΅ User03μ€ μ–΄λ–¤ κ³³μ—μ„λ„ μ°Έμ΅°λκ³  μμ§€ μ•κΈ° λ–„λ¬Έμ— λ‚μ¤‘μ— GCμ— μν•΄ μ κ±°λλ‹¤.'

<br>

### μλ°”μ—λ” Call by Reference κ°λ…μ΄ μ—†λ‹¤?

<aside>
π—£ Java ν”„λ΅κ·Έλλ°μ—μ„λ” Call By ReferenceλΌλ” κ²ƒμ€ μ΅΄μ¬ν•μ§€ μ•λ”λ‹¤.

- μ¤μ§ Call by Valueλ΅μ„ λ™μ‘ν•λ‹¤
</aside>

- μλ°”μ—μ„μ νλΌλ―Έν„°λ” Call By Valueλ΅μ„λ§ λ™μ‘λλ©°, μ›μ‹κ°’μ΄ λ³µμ‚¬λλλƒ μ£Όμ†κ°’μ΄ λ³µμ‚¬λλλƒμ μ°¨μ΄κ°€ μμ„ λΏ!
    - Javaλ” Cμ™€ λ‹¬λ¦¬ ν¬μΈν„°λ¥Ό μ² μ €ν μ¨κ²¨ κ°λ°μκ°€ μ§μ ‘ λ©”λ¨λ¦¬ μ£Όμ†μ— μ ‘κ·Όν•μ§€ λ»ν•κ² ν–κΈ° λ•λ¬Έμ— Call By ReferenceλΌλ” κ°λ…μ΄ μ΅΄μ¬ν•μ§€ μ•λ”λ‹¤.
- λ‹¤λ§, μ™Έλ¶€μ μΈ κ΄€μ μ—μ„λ” μ£Όμ†κ°’μ΄ λ³µμ‚¬λλ“ , ν¬μΈν„°λ¥Ό μ΄μ©ν•΄ μ°Έμ΅°ν•λ“ , λ©”λ¨λ¦¬ μ•μ— μλ” λ°μ΄ν„°λ¥Ό μ°Έμ΅°ν•΄ μ—°μ‚°ν•λ” λ™μ‘ μμ²΄λ” κ°™κΈ° λ•λ¬Έμ— λΉ„μ·ν•λ‹¤κ³  λ³Ό μ μλ‹¤.

### Cμ–Έμ–΄μ ν¬μΈν„° λ³€μμ™€ μλ°”μ μ°Έμ΅° λ³€μ

- Cμ–Έμ–΄μ ν¬μΈν„°λ¥Ό μ΄μ©ν•΄ μ£Όμ†κ°’μ„ μ§μ ‘ κ°€μ Έμ™€ μ „λ‹¬ν•  μ μλ‹¤.
- μ¦‰, μ£Όμ†κ°’μ„ λ°λ λ³€μ΅°ν•μ—¬ λ‹¤λ¥Έ μ†μ¤ νμΌμ—μ„ μ΄μ©λλ” μ£Όμ†κ°’μ„ κ°€μ Έμ¬ μ μλ‹¤λ” λ§μ΄κ³ , μ΄λ¥Ό μ•…μ©ν•λ©΄ ν•µκ³Ό κ°™μ€ λ¶λ²• λ³€μ§ ν”„λ΅κ·Έλ¨μ΄ λ  μ μλ‹¤.
- Javaμ—μ„λ” μ΄λ¬ν• λ¶€λ¶„μ„ μ² μ €ν•κ² λ΄‰μ‡„ν•μ—¬, μλ°”λ„ ν¬μΈν„°λ΅ λ©”λ¨λ¦¬κ°€ μ°Έμ΅°λμ§€λ§ μλ°”λ” ν¬μΈν„°λ¥Ό μ² μ €ν•κ² μ¨κ²¨ κ°λ°μκ°€ ν¬μΈν„°λ¥Ό μ΄μ©ν•μ§€ λ»ν•λ„λ΅ λ§‰μ•„λ²„λ Έλ‹¤.
- λ”°λΌμ„ Javaλ” μ£Όμ†κ°’μ„ λ³µμ‚¬λ¥Ό ν†µν•΄ μ΄μ©μ΄ κ°€λ¥ν•  λΏ, μ§μ ‘ μ•΅μ„Έμ¤ν•΄μ„ μ•…μ©ν•  μλ” μ—†λ‹¤.

### λ‹¤λ¥Έ μ–Έμ–΄μ™€μ μ°¨μ΄μ  μ •λ¦¬

- Java
    - μ¤μ§ Call By Value
- Python
    - Passed By Assignment
- C
    - Call By Value(ν¬μΈν„°λ” Call By Addressμ κ°λ…μΌλ΅, Call By Valueμ΄λ‹¤.)
- C++
    - Call By Valueμ™€ Call By Address(ν¬μΈν„°*), Call By Reference(μ°Έμ΅°μ—°μ‚°μ&)κ°€ λ‹¤ μμ

## μ°Έκ³  μλ£

[[κ°λ°κ³µν†µ] Call by valueμ™€ Call by reference (Java, Python, C/C++)](https://hoons-dev.tistory.com/76)

[](https://github.com/devFancy/2023-CS-Study/blob/main/java/java_call_by_value.md)

[β• μλ°”λ” Call by reference κ°λ…μ΄ μ—†λ‹¤ β“](https://inpa.tistory.com/entry/JAVA-β•-μλ°”λ”-Call-by-reference-κ°λ…μ΄-μ—†λ‹¤-β“)

## μ§λ¬Έ μ •λ¦¬

> Call By Valueμ™€ Call By Referenceμ μ°¨μ΄μ μ— λ€ν•΄ μ„¤λ…ν•΄μ£Όμ„Έμ”.
> 

> Javaμ—λ” ν¬μΈν„° κ°λ…μ΄ μ—†λ” μ΄μ κ°€ λ¬΄μ—‡μΈκ°€μ”?
> 

> Cμ–Έμ–΄μ ν¬μΈν„° λ³€μμ™€ Javaμ μ°Έμ΅° λ³€μμ μ°¨μ΄μ— λ€ν•΄ μ„¤λ…ν•΄μ£Όμ„Έμ”.
>